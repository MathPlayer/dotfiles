#
# ~/.zshrc
#

# Source the users commands library if it exists.
if [ -f "${HOME}/.bin/commands.sh" ]; then
  . "${HOME}/.bin/commands.sh"
fi

#
## oh-my-zsh
#

# Path to the oh-my-zsh installation.
export ZSH="${HOME}/.oh-my-zsh"

# Plugins for oh-my-zsh.
# Default plugins can be found in ~/.oh-my-zsh/plugins/
# Custom plugins may be found n ~/.oh-my-zsh/custom/plugins/
# Add wisely, as too many plugins slow down shell startup.
plugins=(
  dircycle dotenv shrink-path
)

# Load certain plugins only if needed.
if command_exists "brew"; then
  plugins+=(brew)
fi

if command_exists "docker"; then
  plugins+=(docker)
fi

if command_exists "git"; then
  plugins+=(gitfast git-extras)
fi

if command_exists "gradle"; then
  plugins+=(gradle)
fi

if [ -d "${ZSH}/custom/plugins/alias-tips" ]; then
  plugins+=(alias-tips)
fi

# Set name of the theme to load.
# Optionally, set to "random" and oh-my-zsh will use a random theme each time it is loaded.
# See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes
ZSH_THEME="powerlevel10k/powerlevel10k"

# Let the oh-my-zsh magic begin.
. "${ZSH}/oh-my-zsh.sh"

#
## Powerline customization
#

# Remove hostname from prompt.
export POWERLEVEL9K_CONTEXT_TEMPLATE="%n"

# Shorten directory path:
# How many directory to show in full.
export POWERLEVEL9K_SHORTEN_DIR_LENGTH=1
# Truncate from end of directory names.
export POWERLEVEL9K_SHORTEN_STRATEGY="truncate_from_right"
# Remove delimiter in truncated strings.
export POWERLEVEL9K_SHORTEN_DELIMITER=""

# Load aliases.
if [ -f "${HOME}/.aliases" ]; then
  . "${HOME}/.aliases"
fi

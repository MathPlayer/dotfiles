#!/usr/bin/env zsh
#
# ~/.zshrc
#

# Use zprof for debugging startup performance. Keep comented. Nice to have around.
# zmodload zsh/zprof

[[ ! -o interactive ]] && return

# Source the users commands library if it exists.
if [ -f "${HOME}/.bin/commands.sh" ]; then
  . "${HOME}/.bin/commands.sh"
fi

# Load personal shell rc file.
source_if_exists "${HOME}/.shellrc"

#
## oh-my-zsh
#

# Path to the oh-my-zsh installation.
export ZSH="${HOME}/.oh-my-zsh"

# Plugins for oh-my-zsh.
# Default plugins can be found in ~/.oh-my-zsh/plugins/
# Custom plugins may be found in ~/.oh-my-zsh/custom/plugins/
# Add wisely, as too many plugins slow down shell startup.
plugins=(
  dircycle dotenv shrink-path
)

# Load certain plugins only if needed.
if command_exists "brew"; then
  plugins+=(brew)
fi

if command_exists "docker"; then
  plugins+=(docker)
fi

if command_exists "docker-compose"; then
  plugins+=(docker-compose)
fi

if command_exists "git"; then
  plugins+=(git gitfast git-extras)
fi

if command_exists "gradle"; then
  plugins+=(gradle)
fi

if command_exists "pacman"; then
  plugins+=(archlinux)
fi

# Custom plugins installed from the dotfiles repository.
plugins+=(
  you-should-use
  zsh-syntax-highlighting zsh-completions zsh-autosuggestions
  # Add zsh-syntax-highlighting-filetypes after the repo will be clonable as a zsh plugin.
)
autoload -U compinit && compinit

# Set name of the theme to load.
# Optionally, set to "random" and oh-my-zsh will use a random theme each time it is loaded.
# See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes
ZSH_THEME="powerlevel10k/powerlevel10k"

# Let the oh-my-zsh magic begin.
. "${ZSH}/oh-my-zsh.sh"

# Load powerlevel10k configuration.
source_if_exists "${HOME}/.p10k.zsh"

# Load aliases.
source_if_exists "${HOME}/.aliases"

# Use zprof for debugging startup performance. Keep comented. Nice to have around.
# zprof
